/*
 *  jquery-cuboid - v1.0.0
 *  A simple 3d cuboid gallery with jquery and css3 transformations.
 *  
 *
 *  Made by Niklas Plessing <contact@niklasplessing.net>
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="cuboid",d={sides:"auto",dimension:200,width:240,height:300,depth:20,sideclass:"carawall",perspective:0,side_hierarchy:"left,right,front,back,top,bottom"};a.extend(b.prototype,{init:function(){var b=a(this.element),c=this.settings.sideclass,d=b.children("img"),e=this.settings.side_hierarchy;b.addClass("content3d");var f="<ul class='cube'></ul>";b.append(f),d.each(function(b){console.log(b+": "+a(this));var d=a(this);a(".cube").append(a(d)),a(this).wrap('<li class="'+c+'"></li>')}),this.side_amount=b.find("."+c).length;for(var g=e.split(","),h=this.side_amount;6>h;h++)a(".cube").append('<li class="'+g[h]+" "+c+' fill"></li>');this.cubeControls(),this.cubeCss()},cubeControls:function(){var b=a(".content3d"),c=a(".cube"),d=a(this.element).offset(),e=(d.left+this.settings.width/2,d.top+this.settings.height/2,0),f=0,g=this.settings.width;b.on({mouseenter:function(a){e=a.pageX-d.left,f=a.pageY-d.top},mousemove:function(a){var b=(f+(d.top-a.pageY))/4,h=Math.floor((a.pageX-d.left-e)/g*120);c.css("transform","rotateX("+b+"deg) rotateY("+h+"deg)"),c.css("-webkit-transform","rotateX("+b+"deg) rotateY("+h+"deg)"),c.addClass("noanimar").removeClass("animar")},mouseout:function(){c.css("transform","rotateX(0deg) rotateY(0deg)"),c.css("-webkit-transform","rotateX(0deg) rotateY(0deg)"),c.addClass("animar").removeClass("noanimar")}})},cubeCss:function(){var b=this.settings.sideclass,c=this.settings.width,d=this.settings.height,e=this.settings.depth;a(".content3d").css({width:c+"px",height:d+"px"}),this.side_amount<3&&(a("."+b+":nth-child(3), ."+b+":nth-child(4), ."+b+":nth-child(5), ."+b+":nth-child(6)").css("width",e),a("."+b+":nth-child(5), ."+b+":nth-child(6)").css("height",c));var f=a("."+b+":nth-child(1)"),g=a("."+b+":nth-child(2)"),h=a("."+b+":nth-child(3)"),i=a("."+b+":nth-child(4)"),j=a("."+b+":nth-child(5)"),k=a("."+b+":nth-child(6)");f.css("transform","rotateY(90deg) translateX(-"+c/2+"px) translateZ("+e/2+"px)"),g.css("transform","rotateY(-90deg) translateX("+c/2+"px) translateZ("+e/2+"px)"),h.css("transform","rotate(0deg) translateX("+(c/2-e/2)+"px) translateZ("+c+"px)"),i.css("transform","rotateZ(180deg) translateX(-"+(c/2-e/2)+"px)"),j.css("transform","translateX("+(c/2-e/2)+"px) translateY("+(d-c/2)+"px) translateZ("+c/2+"px) rotateX(90deg) "),k.css("transform","translateX("+(c/2-e/2)+"px) translateY(-"+c/2+"px) translateZ("+c/2+"px) rotateX(-90deg)")}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);